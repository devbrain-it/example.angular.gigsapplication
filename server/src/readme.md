# Wikipedia MySQLData folder SQL-dump is placed in folder "database"<br />You need to prepare a MySQL service or MySQL server to port 3306 (default)<br /><br />**then**<br />login mysql<br/>mysql -u<your username or root> -p dev2gigs<br />**then** <br />CREATE DATABASE dev2gigs<br />**then** <br />exit<br />**then** <br />navigate to database folder and run in terminal or console <br/>mysql -u<your username or root> -p dev2gigs < gigsapp.sql<br />**then** <br />exitto use it you need to define creadentials in the server <br/>to be able to use the database. </br></br>Type in your username and password there.# Wikipedia RESTfull APIYou can use the server folder using intelliJ. It is working with free version.### Basic informations    Parameter   Value    -----------------------    Port        4201    URL-Path    gigs/rest/    Server      Jetty 6.0<p/>---### Table restrictions    Delete Table Trigger    Referenced Table Entry      RULE    -------------------------------------------------------------------     user.id                 user_gig.user_fk            DELETE CASCADE  - if a user is deleted, user_gig deletes, if referenced    gig.id                  user_gig.gig_fk             DELETE CASCADE  - if a gig is deleted, user_gig deletes, if referenced    gig.id                  artist_gig.gig_fk           DELETE CASCADE  - if a gig is deleted, artist_gig deletes, if referenced    genre                   artist_gig.genre_fk         DELETE RESTRICT - if a genre is deleted, no artist_gig can be deleted, if referenced    city                    gig.id                      DELETE RESTRICT - if a city is deleted, no gig can be deleted, if referenced<p/>### Services       UserService     1. Check login informationes and return a new token, if valid login data                    2. Renew token expiration time and return as millis                    3. Register a new user<p/>    GigService      1. Deliver all gig-elements (detailled)                    2. Deliver gigs of user as int[] (ids)                    3. Attend a gig for a user                    4. Unattend a gig from a user                    5. add a gig  -- not yet implemented                    6. delete a gig                    7. update a gig -- not yet implemented        <p/>    UnitService     1. Delivers all city names                    2. Delivers all genre names                    3. Delivers all artist names                    4. add a city name : int                    5. delete a city name                    6. update a city name                    7. add a genre name : int                    8. delete a genre name                    9. update a genre name                    10. add a artist name : int                    11. delete a artist name                    12. update a artist name                    13. link a artist to a gig                    14. unlink a artist from a gig                    ---### Details of UserService    Parameter   Value    URL-Path    gigs/rest    #### Fetch a user, if the login is successfull    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        user/login    Method              POST    Serialization (in)  application/x-www-form-urlencoded	Serialization (out) -	Parameter 1         login {user-login}        	Parameter 2         password {user-pw-hash}        	Return value        token: String	Example             POST from http://localhost:80/gigs/rest/user/login (login: gast, password: -16381873012)	#### Fetch all user roles    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        roles    Method              GET    Serialization (in)  -	Serialization (out) -	Return value        roles {OperatorTyp[]}	Example             GET from http://localhost:80/gigs/rest/roles	#### Update a users profile, if the username & password is correct (password and roleId)    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        user/profile/update    Method              POST    Serialization (in)  -	Serialization (out) -	Parameter 1         {user-login} (FormParam: "login")        	Parameter 2         {user-pw-hash} (FormParam: "password")	Parameter 3         {role} (FormParam: "role" : int)        	Return value        user id or exception: String	Example             POST from http://localhost:80/gigs/rest/user/profile/update (login: gast, password: -16381873012, role: 1123)	JQuery              $.ajax({                            url: 'http://localhost:80/gigs/rest/user/profile/update',                            type: "POST",                            dataType: 'json',                            data: { 'login': user_name, 'password': pw, 'userName': visibleUserName, 'role': id }                        });                        #### Register a new user, if the username is not already taken    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        user/register    Method              POST    Serialization (in)  -	Serialization (out) -	Parameter 1         {user-login} (FormParam: "login")        	Parameter 2         {user-pw-hash} (FormParam: "password")        	Parameter 3         {role-id} (FormParam: "role_id" : int)	Return value        user id or exception: String	Example             POST from http://localhost:80/gigs/rest/user/register (login: gast, password: -16381873012, roleId: 51243)	JQuery              $.ajax({                            url: 'http://localhost:80/gigs/rest/user/register',                            type: "POST",                            dataType: 'json',                            data: { 'login': user_name, 'password': pw, 'userName': visibleUserName, 'role_id': id }                        });	---### Details of GigService        Parameter   Value    URL-Path    gigs/rest    <p/>#### Unattend user for a gig     Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        user/{userid:\d+}/gig/{gigid:\d+}/delete    Method              GET    Serialization (in)  -	Serialization (out) -	Parameter 1         {user-id}        	Parameter 2         {gig-id}        	Return value        void	Example             GET from http://localhost:80/gigs/rest/user/1/gig/2/delete#### Attend user for a gig     Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        user/{userid:\d+}/gig/{gigid:\d+}/put    Method              GET    Serialization (in)  -	Serialization (out) -	Parameter 1         {user-id}        	Parameter 2         {gig-id}        	Return value        void	Example             GET from http://localhost:80/gigs/rest/user/1/gig/2/put#### List user gigs as array of integers     Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        user/{userid:\d+}/gigs    Method              GET    Serialization (in)  -	Serialization (out) application/json	Parameter 1         {user-id}        	Return value        integer[]	Example             GET from http://localhost:80/gigs/rest/user/1/gigs	#### List all gigs as array of GigElements    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        gigs    Method              GET    Serialization (in)  -    Serialization (out) application/json    Parameters          -            Return value        GigElement[]                        GigElement =                        {	                        	id:     int,                        	genre:  String                        	artist: String                        	city:   String                        	date:   String                        	time:   String                        }    Example             GET from http://localhost:80/gigs/rest/gigs    #### List all gigs as array of GigElements in a range of index and count from there    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        gigs/from/{index:\d+}/count/{count:\d+}    Method              GET    Serialization (in)  -    Serialization (out) application/json    Parameters          -            Return value        GigElement[]                        GigElement =                        {	                        	id:     int,                        	genre:  String                        	artist: String                        	city:   String                        	date:   String                        	time:   String                        }    Example             GET from http://localhost:80/gigs/rest/gigs/from/0/count/1#### Count all gigs    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        gigs/summary    Method              GET    Serialization (in)  -    Serialization (out) application/json    Parameters          -            Return value        count: int    Example             GET from http://localhost:80/gigs/rest/gigs/summary    #### Deletes a gig    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        gig/delete    Method              DELETE    Serialization (in)  -	Serialization (out) -	Parameter 1         {gig-id} (FormParam: "gigId")        	Parameter 2         {user-Id} (FormParam: "userId")	Return value        true or exception: String	Example             DELETE from http://localhost:80/gigs/rest/gig/delete (gigId: 7623, user-id: 243)	JQuery              $.ajax({                            url: 'http://localhost:80/gigs/rest/gig/delete',                            type: "DELETE",                            dataType: 'json',                            data: { 'gigId': 7623, 'userId': 7623 }                        });                        #### Register new Gig by artist    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        gig    Method              POST    Serialization (in)  -    Serialization (out) application/json    Parameter 1         date: String (dd.mm.yyyy)    Parameter 2         time: String (HH:mm | HH:mm:ss)    Parameter 3         artistId: int    Parameter 4         genreId: int    Parameter 5         cityId: int            Return value        gigId: int or error: string    Example             POST from http://localhost:80/gigs/rest/gig (date: '01.01.2017', time: '22:00', artistId: 3, genreId: 34, cityId: 2673)---### Details of UnitService        Parameter   Value    URL-Path    gigs/rest    <p/>#### Get all artists     Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        artists    Method              GET    Serialization (in)  -	Serialization (out) -	Return value        { id, name }[]	Example             GET from http://localhost:80/gigs/rest/artists	#### Get all cities     Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        cities    Method              GET    Serialization (in)  -	Serialization (out) -	Return value        { id, name }[]	Example             GET from http://localhost:80/gigs/rest/cities#### Get all genres    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        genres    Method              GET    Serialization (in)  -	Serialization (out) -	Return value        { id, name }[]	Example             GET from http://localhost:80/gigs/rest/genres	#### Put new artist    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        artist/{name}    Method              PUT    Serialization (in)  -	Serialization (out) -	Return value        int: id	Example             PUT from http://localhost:80/gigs/rest/artist/uniqueName#### Put new city    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        city/{name}    Method              PUT    Serialization (in)  -	Serialization (out) -	Return value        int: id	Example             PUT from http://localhost:80/gigs/rest/city/uniqueName	#### Put new genre    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        artist/{name}    Method              PUT    Serialization (in)  -	Serialization (out) -	Return value        int: id	Example             PUT from http://localhost:80/gigs/rest/artist/uniqueName#### Delete artist by id    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        artist/{id}    Method              DELETE    Serialization (in)  -	Serialization (out) -	Return value        OK - 200	Example             DELETE from http://localhost:80/gigs/rest/artist/123#### Delete city by id    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        city/{id}    Method              DELETE    Serialization (in)  -	Serialization (out) -	Return value        OK - 200	Example             DELETE from http://localhost:80/gigs/rest/city/123	#### Delete genre by id    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        genre/{id}    Method              DELETE    Serialization (in)  -	Serialization (out) -	Return value        OK - 200	Example             DELETE from http://localhost:80/gigs/rest/genre/123	#### Update artist name by id    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        artist/{id}/name/newName    Method              PUT    Serialization (in)  -	Serialization (out) -	Return value        OK - 200	Example             PUT from http://localhost:80/gigs/rest/artist/123/neuer%20name	#### Update city name by id    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        city/{id}/name/newName    Method              PUT    Serialization (in)  -	Serialization (out) -	Return value        OK - 200	Example             PUT from http://localhost:80/gigs/rest/city/123/neuer%20name	#### Update genre name by id    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        genre/{id}/name/newName    Method              PUT    Serialization (in)  -	Serialization (out) -	Return value        OK - 200	Example             PUT from http://localhost:80/gigs/rest/genre/123/neuer%20name	#### Link artist to gig and genre    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        artist/{artist_id}/gig/{gig_id}/genre/{genre_id}/time/{time:(0?\d|1\d|2[0-3]):[0-5]?\d(:[0-5]?\d)?}    Method              PUT    Serialization (in)  -	Serialization (out) -	Return value        OK - 200	Example             PUT from http://localhost:80/gigs/rest/artist/23/gig/88/genre/123/time/23:59	Example             PUT from http://localhost:80/gigs/rest/artist/23/gig/88/genre/123/time/23:59:21	#### Unlink artist from gig    Parameter           Value    ---------------------------------------------------------    URL-Sub-Path        artist/{artist_id}/gig/{gig_id}    Method              DELETE    Serialization (in)  -	Serialization (out) -	Return value        OK - 200	Example             DELETE from http://localhost:80/gigs/rest/artist/23/gig/88